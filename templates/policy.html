{% extends "base.html" %}

{% block title %}Policy Summarization - Smart City Assistant{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <div class="text-center mb-5">
                <h1 class="display-5"><i class="fas fa-file-text text-primary"></i> Policy Document Summarization</h1>
                <p class="lead">Upload or paste policy documents to get citizen-friendly summaries</p>
            </div>

            <div class="card shadow">
                <div class="card-body">
                    <form method="POST" action="{{ url_for('policy_summarize') }}">
                        <div class="mb-3">
                            <label for="policy_text" class="form-label">Policy Document Text</label>
                            <textarea 
                                class="form-control" 
                                id="policy_text" 
                                name="policy_text" 
                                rows="10" 
                                placeholder="Paste your policy document here..."
                                required>{{ policy_text if policy_text else '' }}</textarea>
                        </div>
                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary btn-lg">
                                <i class="fas fa-magic"></i> Generate Summary
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            {% if summary %}
            <div class="card shadow mt-4">
                <div class="card-header bg-primary text-white">
                    <h5 class="mb-0"><i class="fas fa-lightbulb"></i> AI-Generated Summary</h5>
                </div>
                <div class="card-body">
                    <div class="alert alert-info">
                        <strong>Summary:</strong>
                    </div>
                    <div class="border-start border-4 border-primary ps-3">
                        {{ summary|safe }}
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- Instructions -->
            <div class="card mt-4">
                <div class="card-header">
                    <h5><i class="fas fa-info-circle"></i> How to Use</h5>
                </div>
                <div class="card-body">
                    <ol>
                        <li>Copy and paste your policy document text into the text area above</li>
                        <li>Click "Generate Summary" to process the document</li>
                        <li>Review the AI-generated citizen-friendly summary</li>
                        <li>The summary will include main objectives, key changes, and implementation timeline</li>
                    </ol>
                    <div class="alert alert-warning mt-3">
                        <strong>Note:</strong> For best results, ensure the policy document is in plain text format and contains clear policy information.
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
